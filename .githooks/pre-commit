#!/bin/bash

echo "üîç V√©rification du code avant commit..."

# V√©rification du formatage avec Prettier (utile pour du JS, HTML, CSS)
if command -v prettier &> /dev/null
then
    echo "V√©rification avec Prettier..."
    prettier --check $(git diff --cached --name-only --diff-filter=d | grep -E '\.(js|css|html)$' || echo "skip")
    if [ $? -ne 0 ]; then
        echo "Erreur : Code mal format√©, corrigez avec 'prettier --write'."
        exit 1
    fi
fi

# V√©rification Python avec Black
if command -v black &> /dev/null
then
    echo "V√©rification avec Black..."
    black --check .
    if [ $? -ne 0 ]; then
        echo "Erreur : Code Python mal format√©, corrigez avec 'black .'"
        exit 1
    fi
fi

echo "Code valid√© ! Commit autoris√©."
exit 0
